define("nowcoder/1.2.934/javascripts/site/question/sheji",["nc","cpn","../../core/siteConfig","../../component/editorSub/hEditor/index","ncPlugin/kindeditor/kindeditor","ncPlugin/kindeditor/kindeditor/themes/nowcoder/nowcoder.css","../../site/question/questionUtil","../../action/contest","../../util/ajax","ncPlugin/highlighter/highlighter","../../util/littleAction","../../action/note"],function(a){function b(){{var a=this;g("a.subject-options")}a.fullScreenHeight=window.screen.availHeight||900,a.uploadFile=[],a.submitForm=g("#submitForm"),a.answerIpt=g("#answer"),a.urlIpt=g("#urls"),a.finishIpt=g('<input type="hidden" name="finish" value="1" />'),a.syncIpt=a.submitForm.find("input[name=sync]"),a.fixedMenu=g("div.fixed-menu"),a.answerTextarea=new m({renderTo:g("textarea.subject-anwser-wd"),renderBy:"replaceWith",noUploadRemote:!0,height:320,fullScreen:function(){a.gotoFullScreen()}}),l.transform(g("div.synchronization label"),{change:function(){var b=this.getEl();this.isChecked()?(b.parent().addClass("selected"),a.syncIpt.val("1"),a.submitForm.append(a.syncIpt)):(b.parent().removeClass("selected"),a.syncIpt.remove())}}),a.uploadEl=g("#attachList"),a.uploadUl=a.uploadEl.find("ul");{var b=window.selected&&window.selected.content||"";(window.selected&&window.selected.urls||"").split(",")}b&&a.answerTextarea.val(b),a.isIntelligentPaper=window.isIntelligentPaper||!1,n.init({timeContainer:g("a.progress-time"),timeEl:g("span.time-text"),isCountingUp:a.isIntelligentPaper}),"1"===j.get("questionFullScreen")&&a.gotoFullScreen()}function c(a){var b=this,c=g(a.target),d=c.prop("tagName").toLowerCase(),e=c.attr("id");if("aheadFinish"===e)return b.submitForm.append(b.finishIpt),a.preventDefault(),void k.confirm("你尚未完成本次测评，确定要提前交卷？",function(){b.submitForm.submit()},function(){b.finishIpt.remove()});var f=i.map(b.uploadFile,function(a){return a.url}),h=b.answerTextarea.val(),j=f.join(",");b.answerIpt.val(h),b.urlIpt.val(j),"form"!==d&&"aheadFinish"!==e&&b.finishIpt.remove()}function d(){var a=this,b=320;a.answerTextarea.waitCreated(function(){a.fullScreen?(n.gotoFullScreen(!1),a.fullScreen=!1,g(window).scrollTop(a.winScrollTop),a.fixedMenu.show(),a.answerTextarea.keEditor.edit._editHeight=320,a.answerTextarea.resize("100%"),a.answerTextarea.autoHeight()):(a.winScrollTop=g(window).scrollTop(),n.gotoFullScreen(),g(window).scrollTop(0),a.fullScreen=!0,a.fixedMenu.hide(),a.answerTextarea.keEditor.edit._editHeight=Math.max(a.fullScreenHeight-b,180),a.answerTextarea.resize("100%"),a.answerTextarea.autoHeight())})}var e=a("nc"),f=a("cpn"),g=e.$,h=e.Sys,i=e.Base,j=e.Db,k=f.Popup,l=f.CheckBox,m=(a("../../core/siteConfig"),a("../../component/editorSub/hEditor/index")),n=a("../../site/question/questionUtil");h.ready({initialize:b,binds:{"click #next":c,"submit #submitForm":c,"click #aheadFinish":c},gotoFullScreen:d})});